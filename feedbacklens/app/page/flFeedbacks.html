
<div class="page page-table" data-ng-controller="feedbackController">

    <div class="row">
        <div class="col-md-3">
          <section class="panel panel-default">
            <div class="panel-heading" style="position: relative;"><strong><span class="glyphicon glyphicon-th"></span> Filter</strong></div>
              <div class="panel-body">
                <div>
                  <span class="ui-select custSelect" style="width: 100%; background-color:white;">
                    <select ng-model="domainId" ng-change="onSelectDomain()">
                      <option value=""><span style="color: grey;text-align: center">Select Domain</span></option>
                      <option value="{{domain.DOMAIN_ID}}" data-ng-repeat="domain in domains">{{domain.DOMAIN_URL}}</option>
                    </select>
                  </span>
                </div>
                <div class="divider divider-md"></div> 
                <div class="input-group ui-datepicker">
                        <input type="text" 
                               class="form-control"
                               uib-datepicker-popup="{{format}}"
                               ng-model="startDate"
                               is-open="popup1.opened"
                               min-date="minFromStartDate"
                               max-date="maxDate"
                               datepicker-options="dateOptions"
                               ng-required="true"
                               close-text="Close"
                               readonly='readonly'
                               placeholder='From Date'
                               ng-disabled="domainId == ''"/>
                        <span class="input-group-addon" ng-click="openStartDateCal()"><i class="ti-calendar"></i></span>
                    </div>
                <div class="divider divider-md"></div>
                <div class="input-group ui-datepicker">
                        <input type="text" 
                               class="form-control"
                               uib-datepicker-popup="{{format}}"
                               ng-model="endDate"
                               is-open="popup2.opened"
                               min-date="startDate"
                               max-date="maxDate"
                               datepicker-options="dateOptions"
                               ng-required="true"
                               close-text="Close"
                               readonly='readonly'
                               placeholder='To Date'
                               ng-disabled="domainId == ''"/>
                        <span class="input-group-addon" ng-click="openEndDateCal()"><i class="ti-calendar"></i></span>
                    </div>
                <div class="divider divider-md"></div>  
                <div>
                  <span class="ui-select custSelect" style="width: 100%; background-color:white ">
                    <select ng-model="catId" ng-disabled="domainId == ''" class="form-control">
                      <option value=""><span style="color: grey;text-align: center">All Categories</span></option>
                      <option value="{{cat.CAT_ID}}" data-ng-repeat="cat in categories">{{cat.CAT_NAME}}</option>
                    </select>
                  </span>
                </div>
                <div class="divider divider-md"></div>  
                <div>
                  <span class="ui-select custSelect" style="width: 100%; background-color:white ">
                    <select ng-model="subCatId" ng-disabled="domainId == ''" class="form-control">
                      <option value=""><span style="color: grey;text-align: center">All Sub Categories</span></option>
                      <option value="{{suCat.SUBCAT_ID}}" data-ng-repeat="suCat in subCategories">{{suCat.SUBCAT_NAME}}</option>
                    </select>
                  </span>
                </div>
                <div class="divider divider-md"></div>  
                <div>
                  <span class="ui-select custSelect" style="width: 50%; background-color:white ">
                    <select ng-model="rating" ng-disabled="domainId == ''" class="form-control">
                      <option value=""><span style="color: grey;text-align: center">All Ratings</span></option>
                      <option value="{{rt}}" data-ng-repeat="rt in [1,2,3,4,5]">{{rt}}</option>
                    </select>
                  </span>
                </div>
                <div class="divider divider-lg"></div>
                <button type="button" class="btn btn-primary btn-block btn-w-md" ng-click="applyFilterTogetFeedbacks()" ng-disabled="domainId == ''">Submit</button>
              </div>
            </section>
        </div>
    
    
        <div class="col-md-9" ng-show="feedbacks != '' && feedbacks.length > 0">
          <div class="panel panel-default">
            <div class="panel-heading"><strong><span class="glyphicon glyphicon-th"></span> Feedbacks</strong></div>
            <table class="table">
                <thead>
                    <tr>
                        <th width="4%">#</th>
                        <th width="8%" ng-if="rating == ''">Rating</th>
                        <th width="40%">Comments</th>
                        <th width="16%">Email</th>
                        <th width="16%" ng-if="catId == ''">Category</th>
                        <th width="16%" ng-if="subCatId == ''">Sub Category</th>
                    </tr>
                </thead>
                <tbody>
                    <tr data-ng-repeat="feedback in feedbacks">
                      <td style="text-align: center;">{{$index+1}}</td>
                      <td style="text-align: center;" ng-if="rating == ''"><span class="label {{themeColors[feedback.RATING-1]}}">{{feedback.RATING}}</span></td>
                      <td>{{feedback.TEXT.length > 35 ? feedback.TEXT.substring(0,35) + '...': feedback.TEXT}}</td>
                      <td>{{feedback.EMAIL != '' ? feedback.EMAIL : '-'}}</td>
                      <td ng-if="catId == ''">{{feedback.CAT_ID}}</td>
                      <td ng-if="subCatId == ''">{{feedback.SUBCAT_ID}}</td>
                    </tr>
                </tbody>
            </table>
          </div>
    </div>

    <div class="col-md-9" ng-show="feedbacks == '' || feedbacks.length == 0">
          
              <div class="callout callout-info">
                    <p>Didn't find any feedback!</p>
                </div>
            
    </div>
</div>